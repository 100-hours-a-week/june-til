## 📆 2025-01-22

### 🔔 스크럼

- 학습 목표 1 : 딥다이브 - 쿠버네티스에서 데이터 영속성을 보장하는 방법
- 학습 목표 2 : 백준 12082번 Badhorse(small2) 문제풀이
  <br/>



### 🚀 Today I Learned


#### | 딥다이브 - 쿠버네티스에서 데이터 영속성을 보장하는 방법
쿠버네티스 볼륨(Volume)의 개념과 도커 볼륨의 개념, 차이 

# Kubernetes에서 데이터 영속성을 보장하는 방법

                볼륨(Volume)과 퍼시스턴트 볼륨(PersistentVolume, PersistentVolumeClaim)

                                                                     난이도: ★★

### - 세부 내용 -

1. 쿠버네티스 볼륨(Volume)의 개념과, 도커 볼륨과의 차이를 조사해보세요.

2. 퍼시스턴트 볼륨(PersistentVolume, PV)과 퍼시스턴트 볼륨 클레임(PersistentVolumeClaim, PVC)은 무엇이며 어떤 식으로 연동되는지 정리해주세요.

3. 정적 프로비저닝과 동적 프로비저닝의 차이를 알아보고, 예시 스펙(스토리지 클래스, StorageClass)을 간단히 살펴보세요.

4. (옵션) 실제 클라우드 환경(AWS EBS, GCE Persistent Disk, NFS 등)에서 PV/PVC가 어떻게 동작하는지, 실무 예시를 들어 설명해보세요.

---

## 1. 쿠버네티스 볼륨(Volume)의 개념과, 도커 볼륨과의 차이를 조사해보세요.

### K8S - 볼륨(Volume) : 컨테이너에 데이터 저장소를 제공하는 방법

- Pod 내의 “모든 컨테이너”가 접근 가능
- 로컬디스크, NFS(Network File System), 클라우드저장소 지원
- Pod가 사라질때 함께 사라진다. (persistentVolume을 사용하면 유지가능)

### 도커 - 볼륨 : 컨테이너 삭제시에도 데이터가 유지되도록 사용하는 옵션

- 볼륨 옵션 자체가 컨테이너가 사라질때 데이터를 유지 시키려는 것 이므로 일반적으로 Pod가 사라질때 사라지는 k8s에서의 볼륨과 다르다!
- k8s에서와 다르게 컨테이너별로 볼륨을 구성하므로 기본적으로 데이터 공유가 되지않음

 

|  | K8S | Docker |
| --- | --- | --- |
| 접근성 | Pod 내의 모든 컨테이너 | 정해진 컨테이너 |
| 생명주기 | Pod가 사라질떼 사라짐 | 컨테이너가 사라져도 유지 |
| 데이터 공유 | Pod내에선 공유o | 기본적으로 데이터 공유x |

---

## 2. 퍼시스턴트 볼륨(PersistentVolume, PV)과 퍼시스턴트 볼륨 클레임(PersistentVolumeClaim, PVC)은 무엇이며 어떤 식으로 연동되는지 정리해주세요.

### 퍼시스턴트 볼륨(PersistentVolume) : 클러스터에서 정의하고 관리하는 클러스터 자원

### 퍼시스턴트 볼륨 클레임(PersistentVolumeClaim, PVC) : 사용자가 작업할 Pod에서 어느정도 용량을 차지할 것인지 선언하여 그 조건을 만족하는 PV를 요청하는 작업

- 이해를 돕기 위한 예시 
- 빵떡이는 1024GB의 저장소를 가지고 있다.
저장소를 사용 용도 별로 만들어두려고 다른 크기로 나누었다.
512GB(실제론 GI 로 쓴다고 했던거로)
256GB 
128GB
… (각각이 PV)

클라우드를 공부하던 June은 계산해봤을때 약 512GB의 저장공간을 차지할 것으로 예상하여 빵떡이에게 요청했다. (PVC)

쿠버네티스는  512GB의 스토리지에 June의 요청을 바인딩(연결)했다.

June은 Pod의 매니페스트 파일에서 저장소를 마운트했다.

이제 June은 Pod를 실행할때 자동으로 저장소가 연결되어 Pod내부 컨테이너에서 데이터를 사용할 수 있다!

![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/cf024025-486d-4514-84ae-3a7c5951c17c/ec850426-b6f3-4f98-9032-c302c4b7b615/image.png)

* 중요한 데이터는 PV를 Retrain 정책으로 설정하여 Pod삭제 후에도 보존

---

### 3. 정적 프로비저닝과 동적 프로비저닝의 차이를 알아보고, 예시 스펙(스토리지 클래스, StorageClass)을 간단히 살펴보세요.

### 정적 프로비저닝 : 관리자가 클러스터에서 사용할 스토리지를 미리 정의해두는 방식 (빵떡과 June 예시)

- 사용자가 PVC를 생성 → PVC의 요구사항과 일치하는 PV를 쿠버네티스가 매칭하여 바인딩
- 관리자가 스토리지 설정을 모두 수동으로 관리

### 동적 프로비저닝 : 사용자가 PVC를 생성하면 스토리지클래스를 기반으로 PV를 자동 생성하는 방식

- 사용자는 PVC를 통해 필요한 스토리지 요구사항만 정의
- 클라우드 환경(예: AWS EBS, Google Persistent Disk 등)과 잘 통합, 유연함
- 클러스터에서 적절한 StorageClass를 기반으로 PV가 자동 생성

|  | 정적 프로비저닝 | 동적 프로비저닝 |
| --- | --- | --- |
| 스토리지 생성 방식 | 관리자가 미리 PV생성 | PVC 생성시 StorageClass를 기반으로 PV 자동 생성 |
| 유연성 | 수동관리 | 자동생성 |
| 사용자 경험 | 스토리지 크기와 정확히 일치해야함 | 사용자가 PVC 요청만 하면, 필요한 PV가 자동 생성됨 |
| 클라우드 통합 | 제한적(클라우드 스토리지도 수동설정) | 쉽게 가능(AWS, GCP, Azure 등) |
| 관리자 역할 | PV ‘수동’ 생성 및 관리 | storageClass 정의 |

### **StorageClass란?**

• 동적 프로비저닝에서 사용하는 리소스.
• 스토리지의 **타입, 매개변수, 프로비저너**를 정의하여, PVC 생성 시 스토리지 리소스를 자동으로 프로비저닝.
• 클라우드 제공자의 스토리지 백엔드(AWS EBS, GCP Persistent Disk 등)와 통합하여 동작

<br/>

#### | [백준 12082번 Badhorse(small2) 문제풀이](https://github.com/availrum/newb/blob/main/Badhorsesmall2.cpp)

<br/>

### 🔥 오늘의 도전 과제와 해결 방법

- 도전 과제 1: 알고리즘 공부했던 내용을 기반으로 다른 문제 풀어보기
  <br/>

두 개로 나누면서 특정 정점끼리의 간선을 무시하는 방식의 이분그래프가 존재하는지를 확인하여 풀기
문자열로 주어지기에 해시맵을 사용하여 처음 등장하는 이름의 경우 idx에 매핑하고, 그 매핑한 정점을 기준으로 간선을 정의한다.
이후 이분그래프 탐색을 사용하여 해결

### 🗨️ 오늘의 회고

<!--
- 오늘의 학습 경험에 대한 자유로운 생각이나 느낀 점을 기록합니다.
- 성공적인 점, 개선해야 할 점, 새롭게 시도하고 싶은 방법 등을 포함할 수 있습니다.-->

-- 이분그래프의 대표적인 활용문제의 예시 / 문자열 활용을 고민해야하기에 이분그래프중엔 나름 생각해볼만한 문제

<br/>


### 📰 참고 자료 및 링크